package com.cg.onlinefooddelivery.app.serviceimpl;

import java.util.Optional;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import com.cg.onlinefooddelivery.app.domain.OrderDetail;
import com.cg.onlinefooddelivery.app.exception.OrderNotFoundException;
import com.cg.onlinefooddelivery.app.repository.OrderDetailRepository;
import com.cg.onlinefooddelivery.app.service.OrderDetailService;
/**
 * this OrderDetailService class is used for performing all business related operations
 * @author sweta
 *
 */
@Service
public class OrderDetailServiceImpl implements OrderDetailService {

	@Autowired
	private OrderDetailRepository orderRepository;
	
	
	public OrderDetail SaveOrUpdate(OrderDetail orderDetail) throws OrderNotFoundException {
		try {
		orderDetail.setOrderNo(orderDetail.getOrderNo());
		return orderRepository.save(orderDetail);
		}
		catch(Exception e) {
			throw new OrderNotFoundException("Order No :"+orderDetail.getOrderNo()+" already exist");
		}
	}
	
	public Iterable<OrderDetail> getAllOrderDetails(){
		return orderRepository.findAll();
	}
	
	public OrderDetail findById(int id) {
		OrderDetail order= orderRepository.findById(id);
		return order;
	
	}
	
	public void deleteOrderDetailsById(int id) throws OrderNotFoundException {
		Optional<OrderDetail> order=orderRepository.findById(id);
		if(order==null) {
			throw new OrderNotFoundException("Order Id doesn't exists");
		}
	  orderRepository.deleteById(id);
	}
	
}
